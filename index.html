<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teste de Movimento</title>
  <style>
    body {
      margin: 0;
      background-color: #121212;
      overflow: hidden;
      font-family: sans-serif;
    }#bola {
  position: absolute;
  width: 50px;
  height: 50px;
  background-color: white;
  border-radius: 50%;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 1;
}

#mensagemPermissao {
  position: absolute;
  left: 50%;
  top: calc(50% - 70px);
  transform: translateX(-50%);
  color: white;
  font-size: 16px;
  background-color: rgba(0, 0, 0, 0.7);
  padding: 10px 20px;
  border-radius: 10px;
  z-index: 2;
  display: none;
}

#btnConfig {
  position: absolute;
  bottom: 20px;
  right: 20px;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 3;
}

#btnConfig svg {
  width: 32px;
  height: 32px;
  fill: black;
}

#configPanel {
  position: fixed;
  bottom: -100%;
  left: 0;
  right: 0;
  background-color: #1e1e1e;
  color: white;
  padding: 20px;
  transition: bottom 0.3s ease-out;
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  z-index: 4;
}

#configPanel.mostrar {
  bottom: 25%;
}

.config-header {
  display: flex;
  justify-content: flex-end;
}

#fecharConfig {
  background: none;
  border: none;
  font-size: 20px;
  color: red;
  cursor: pointer;
  transition: color 0.2s;
}

#fecharConfig:hover {
  color: orangered;
}

  </style>
</head>
<body>
  <div id="bola"></div>
  <div id="mensagemPermissao">Toque na tela para permitir o uso do sensor de movimento</div>
  <button id="btnConfig" aria-label="Abrir configurações" title="Configurações">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M12 15.5A3.5 3.5 0 1 0 12 8a3.5 3.5 0 0 0 0 7.5zm7.43-2.57a7.97 7.97 0 0 0 0-1.86l2.11-1.65a.5.5 0 0 0 .12-.64l-2-3.46a.5.5 0 0 0-.6-.23l-2.49 1a7.94 7.94 0 0 0-1.6-.93L14.5 2.5a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0-.5.5L9.03 5.16c-.6.24-1.14.55-1.6.93l-2.49-1a.5.5 0 0 0-.6.23l-2 3.46a.5.5 0 0 0 .12.64l2.11 1.65a7.97 7.97 0 0 0 0 1.86L2.56 14.3a.5.5 0 0 0-.12.64l2 3.46a.5.5 0 0 0 .6.23l2.49-1c.47.38 1 .69 1.6.93L9.5 21.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5l.47-2.67c.6-.24 1.14-.55 1.6-.93l2.49 1a.5.5 0 0 0 .6-.23l2-3.46a.5.5 0 0 0-.12-.64l-2.11-1.65z"/>
    </svg>
  </button>
  <div id="configPanel">
    <div class="config-header">
      <button id="fecharConfig">✕</button>
    </div>
    <div>
      <label>Cor da página: <input type="color" id="corPagina" value="#121212" /></label>
    </div>
    <div>
      <label>Cor da bolinha: <input type="color" id="corBola" value="#ffffff" /></label>
    </div>
  </div>  <script>
    const bola = document.getElementById('bola');
    const msgPermissao = document.getElementById('mensagemPermissao');
    const btnConfig = document.getElementById('btnConfig');
    const configPanel = document.getElementById('configPanel');
    const fecharConfig = document.getElementById('fecharConfig');
    const corPagina = document.getElementById('corPagina');
    const corBola = document.getElementById('corBola');

    let permitido = false;

    window.addEventListener('click', async () => {
      if (!permitido && typeof DeviceOrientationEvent?.requestPermission === 'function') {
        try {
          const resposta = await DeviceOrientationEvent.requestPermission();
          if (resposta === 'granted') {
            window.addEventListener('deviceorientation', moverBola);
            msgPermissao.style.display = 'none';
            permitido = true;
          }
        } catch (e) {
          console.error('Permissão negada:', e);
        }
      }
    });

    function moverBola(event) {
      const x = event.gamma;
      const y = event.beta;

      const largura = window.innerWidth;
      const altura = window.innerHeight;
      const centroX = largura / 2;
      const centroY = altura / 2;

      const maxDeslocamento = 100;

      const deslocX = Math.max(Math.min(x, 45), -45) * (maxDeslocamento / 45);
      const deslocY = Math.max(Math.min(y, 45), -45) * (maxDeslocamento / 45);

      bola.style.left = `${centroX + deslocX}px`;
      bola.style.top = `${centroY + deslocY}px`;
    }

    // Mostrar mensagem se ainda não foi permitido
    window.addEventListener('load', () => {
      if (typeof DeviceOrientationEvent?.requestPermission === 'function') {
        msgPermissao.style.display = 'block';
      } else {
        window.addEventListener('deviceorientation', moverBola);
      }
    });

    btnConfig.addEventListener('click', () => {
      configPanel.classList.add('mostrar');
    });

    fecharConfig.addEventListener('click', () => {
      configPanel.classList.remove('mostrar');
    });

    corPagina.addEventListener('input', () => {
      document.body.style.backgroundColor = corPagina.value;
    });

    corBola.addEventListener('input', () => {
      bola.style.backgroundColor = corBola.value;
    });
  </script></body>
</html>
